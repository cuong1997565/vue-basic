{"remainingRequest":"/var/www/javascript/vuejs/vue-cnd/vue-router/node_modules/babel-loader/lib/index.js!/var/www/javascript/vuejs/vue-cnd/vue-router/node_modules/cache-loader/dist/cjs.js??ref--0-0!/var/www/javascript/vuejs/vue-cnd/vue-router/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/javascript/vuejs/vue-cnd/vue-router/src/views/CreateArticle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/javascript/vuejs/vue-cnd/vue-router/src/views/CreateArticle.vue","mtime":1564455149993},{"path":"/var/www/javascript/vuejs/vue-cnd/vue-router/node_modules/cache-loader/dist/cjs.js","mtime":1564127716179},{"path":"/var/www/javascript/vuejs/vue-cnd/vue-router/node_modules/babel-loader/lib/index.js","mtime":1564127721155},{"path":"/var/www/javascript/vuejs/vue-cnd/vue-router/node_modules/cache-loader/dist/cjs.js","mtime":1564127716179},{"path":"/var/www/javascript/vuejs/vue-cnd/vue-router/node_modules/vue-loader/lib/index.js","mtime":1564127714399}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport PictureInput from 'vue-picture-input';\nimport axios from 'axios';\nimport config from '@/config';\nexport default {\n  beforeRouteEnter: function beforeRouteEnter(to, from, next) {\n    if (!localStorage.getItem(\"auth\")) {\n      return next({\n        path: \"/login\"\n      });\n    }\n\n    next();\n  },\n  data: function data() {\n    return {\n      title: \"\",\n      content: \"\",\n      image: null,\n      categories: [],\n      category: \"\",\n      loading: false\n    };\n  },\n  components: {\n    PictureInput: PictureInput\n  },\n  mounted: function mounted() {\n    this.getCategories();\n  },\n  methods: {\n    onChange: function onChange(image) {\n      this.image = image;\n    },\n    createArticle: function createArticle() {\n      var _this = this;\n\n      this.loading = true;\n      var form = new FormData();\n      form.append('file', this.image);\n      form.append('upload_preset', 'g5ziunzg');\n      form.append('api_key', '132255634713478');\n      axios.post('https://api.cloudinary.com/v1_1/bahdcoder/image/upload', form).then(function (res) {\n        _this.loading = false;\n\n        _this.submitForm(res);\n      }).catch(function (err) {\n        _this.loading = false;\n\n        _this.$noty.error(\"Image upload false\");\n      });\n    },\n    submitForm: function submitForm(response) {\n      var _this2 = this;\n\n      axios.post(\"\".concat(config.apiUrl, \"/articles\"), {\n        title: this.title,\n        content: this.content,\n        category_id: this.category,\n        imageUrl: response.data.secure_url\n      }, {\n        headers: {\n          Authorization: \"Bearer \".concat(this.$root.auth.token)\n        }\n      }).then(function () {\n        _this2.loading = false;\n\n        _this2.$noty.success(\"Article created successfully.\");\n\n        _this2.$router.push(\"/home\");\n      }).catch(function () {\n        _this2.loading = false;\n\n        _this2.$noty.error(\"Oops ! Something went wrong\");\n      });\n    },\n    getCategories: function getCategories() {\n      var _this3 = this;\n\n      var categories = localStorage.getItem(\"categories\");\n\n      if (categories) {\n        this.categories = JSON.parse(categories);\n        return;\n      }\n\n      axios.get(\"\".concat(config.apiUrl, \"/categories\")).then(function (res) {\n        _this3.categories = res.data.categories;\n        localStorage.setItem(\"categories\", JSON.stringify(_this3.categories));\n      });\n    }\n  }\n};",{"version":3,"sources":["CreateArticle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,OAAA,YAAA,MAAA,mBAAA;AACA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,MAAA,MAAA,UAAA;AACA,eAAA;AACA,EAAA,gBADA,4BACA,EADA,EACA,IADA,EACA,IADA,EACA;AACA,QAAA,CAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA,EAAA;AACA,aAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA,CAAA;AACA;;AACA,IAAA,IAAA;AACA,GANA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,KAAA,EAAA,IAHA;AAIA,MAAA,UAAA,EAAA,EAJA;AAKA,MAAA,QAAA,EAAA,EALA;AAMA,MAAA,OAAA,EAAA;AANA,KAAA;AAQA,GAhBA;AAiBA,EAAA,UAAA,EAAA;AACA,IAAA,YAAA,EAAA;AADA,GAjBA;AAoBA,EAAA,OApBA,qBAoBA;AACA,SAAA,aAAA;AACA,GAtBA;AAuBA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,KADA,EACA;AACA,WAAA,KAAA,GAAA,KAAA;AACA,KAHA;AAIA,IAAA,aAJA,2BAIA;AAAA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,UAAA,IAAA,GAAA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,CAAA,MAAA,CAAA,MAAA,EAAA,KAAA,KAAA;AACA,MAAA,IAAA,CAAA,MAAA,CAAA,eAAA,EAAA,UAAA;AACA,MAAA,IAAA,CAAA,MAAA,CAAA,SAAA,EAAA,iBAAA;AACA,MAAA,KAAA,CAAA,IAAA,CAAA,wDAAA,EAAA,IAAA,EACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;;AACA,QAAA,KAAA,CAAA,UAAA,CAAA,GAAA;AACA,OAJA,EAKA,KALA,CAKA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CAAA,oBAAA;AACA,OARA;AAUA,KApBA;AAsBA,IAAA,UAtBA,sBAsBA,QAtBA,EAsBA;AAAA;;AACA,MAAA,KAAA,CAAA,IAAA,WAAA,MAAA,CAAA,MAAA,gBAAA;AACA,QAAA,KAAA,EAAA,KAAA,KADA;AAEA,QAAA,OAAA,EAAA,KAAA,OAFA;AAGA,QAAA,WAAA,EAAA,KAAA,QAHA;AAIA,QAAA,QAAA,EAAA,QAAA,CAAA,IAAA,CAAA;AAJA,OAAA,EAKA;AACA,QAAA,OAAA,EAAA;AACA,UAAA,aAAA,mBAAA,KAAA,KAAA,CAAA,IAAA,CAAA,KAAA;AADA;AADA,OALA,EASA,IATA,CASA,YAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,KAAA;;AACA,QAAA,MAAA,CAAA,KAAA,CAAA,OAAA,CAAA,+BAAA;;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA,OAbA,EAaA,KAbA,CAaA,YAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,KAAA;;AACA,QAAA,MAAA,CAAA,KAAA,CAAA,KAAA,CAAA,6BAAA;AACA,OAhBA;AAiBA,KAxCA;AA0CA,IAAA,aA1CA,2BA0CA;AAAA;;AACA,UAAA,UAAA,GAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA;;AACA,UAAA,UAAA,EAAA;AACA,aAAA,UAAA,GAAA,IAAA,CAAA,KAAA,CAAA,UAAA,CAAA;AACA;AACA;;AACA,MAAA,KAAA,CAAA,GAAA,WAAA,MAAA,CAAA,MAAA,kBAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,UAAA,GAAA,GAAA,CAAA,IAAA,CAAA,UAAA;AACA,QAAA,YAAA,CAAA,OAAA,CAAA,YAAA,EAAA,IAAA,CAAA,SAAA,CAAA,MAAA,CAAA,UAAA,CAAA;AACA,OAHA;AAIA;AApDA;AAvBA,CAAA","sourcesContent":["<template>\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"col-md-8 offset-md-2\">\n                <div class=\"card my-5\">\n                    <div class=\"card-body\">\n                        <picture-input \n                        accept = \"image/jpeg,image/png\"\n                        size=\"5\"\n                        button-class=\"btn btn-danger\"\n                        :custom-strings = \"{\n                            upload : '<h1>Bummer!</h1>',\n                            drag : 'Drag a GIF or GTFO'\n                        }\"\n                        @change=\"onChange\"\n                        />\n                        <select class=\"form-control mt-3\" v-model=\"category\">\n                            <option selected>Select a category</option>\n                            <option :value=\"category.id\" :key=\"category.id\" v-for=\"category in categories\">\n                                {{ category.name }}\n                            </option>\n                        </select>\n                        <input type=\"text\" v-model=\"title\" placeholder=\"title\" class=\"form-control mb-3 mt-3\">\n                        <wysiwyg v-model=\"content\" />\n                        <div class=\"text-center\">\n                            <button @click=\"createArticle()\" class=\"btn-success btn btn-lg mt-3\">Create Article</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport PictureInput from 'vue-picture-input';\nimport axios from 'axios';\nimport config from '@/config';\nexport default {\n    beforeRouteEnter(to, from, next) {\n        if(!localStorage.getItem(\"auth\")) {\n            return next({path : \"/login\"});\n        }\n        next();\n    },\n    data() {\n        return {\n            title : \"\",\n            content : \"\",\n            image : null,\n            categories : [],\n            category : \"\",\n            loading : false\n        }\n    },\n    components : {\n        PictureInput\n    },\n    mounted() {\n          this.getCategories();\n    },\n    methods : {\n        onChange(image) {\n            this.image = image;\n        },\n        createArticle() {\n            this.loading = true;\n            const form = new FormData();\n            form.append('file', this.image);\n            form.append('upload_preset','g5ziunzg');\n            form.append('api_key','132255634713478');\n            axios.post('https://api.cloudinary.com/v1_1/bahdcoder/image/upload',form)\n            .then((res) => {\n                this.loading = false;\n                 this.submitForm(res);\n            })\n            .catch(err => {\n                this.loading = false;\n                this.$noty.error(\"Image upload false\")\n            })\n\n        },\n\n        submitForm(response) {\n            axios.post(`${config.apiUrl}/articles`, {\n                title : this.title,\n                content : this.content,\n                category_id : this.category,\n                imageUrl : response.data.secure_url\n            },{\n                headers : {\n                    Authorization : `Bearer ${this.$root.auth.token}`\n                }\n            }).then(() => {\n                this.loading = false;\n                this.$noty.success(\"Article created successfully.\");\n                this.$router.push(\"/home\");\n            }).catch(() => {\n                this.loading = false;\n                this.$noty.error(\"Oops ! Something went wrong\");\n            })\n        },\n\n        getCategories() {\n            const categories = localStorage.getItem(\"categories\");\n            if(categories) {\n                this.categories = JSON.parse(categories);\n                return ;\n            }\n            axios.get(`${config.apiUrl}/categories`).then(res => {\n                this.categories = res.data.categories;\n                localStorage.setItem(\"categories\", JSON.stringify(this.categories));\n            })\n        }\n    }\n}\n</script>\n"],"sourceRoot":"src/views"}]}